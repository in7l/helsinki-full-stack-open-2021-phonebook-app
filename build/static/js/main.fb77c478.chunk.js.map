{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Person.js","components/Persons.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Filter","search","handleSearch","value","onChange","PersonForm","addOrUpdatePerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Person","person","deletePerson","name","number","onClick","Persons","persons","deletePersonById","map","id","Notification","message","isError","classes","className","baseUrl","personService","getAll","axios","get","then","response","data","create","newObject","post","update","put","remove","delete","App","useState","setPersons","setNewName","setNewNumber","setSearch","notification","setNotification","useEffect","allPersons","setFadingNotification","timeout","setTimeout","personsToDisplay","filter","toLowerCase","includes","event","target","preventDefault","find","personId","p","window","confirm","updatedPerson","returnedPerson","catch","error","updatePhoneNumber","newPerson","concat","addPerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.fb77c478.chunk.js","sourcesContent":["const Filter = ({ search, handleSearch }) => (\n  <div>\n    filter shown with <input value={search} onChange={handleSearch} />\n  </div>\n);\n\nexport default Filter;\n","const PersonForm = ({ addOrUpdatePerson, newName, handleNameChange, newNumber, handleNumberChange }) => (\n  <form onSubmit={addOrUpdatePerson}>\n    <div>\n      name: <input value={newName} onChange={handleNameChange} />\n    </div>\n    <div>\n      number: <input value={newNumber} onChange={handleNumberChange} />\n    </div>\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n);\n\nexport default PersonForm;\n","const Person = ({ person, deletePerson }) => (\n  <p>\n    {person.name} {person.number}\n    <button onClick={deletePerson}>delete</button>\n  </p>\n);\n\nexport default Person;\n","import Person from './Person';\n\nconst Persons = ({ persons, deletePersonById }) => (\n  <div>\n    {persons.map(person =>\n      <Person\n        key={person.name}\n        person={person}\n        deletePerson={() => deletePersonById(person.id)}\n        />\n    )}\n  </div>\n);\n\nexport default Persons;\n","function Notification({ message, isError = false }) {\n  if (message === null) {\n    return null;\n  };\n\n  const additionalClassName = isError ? 'error' : 'message';\n  const classes = `notification ${additionalClassName}`;\n\n  return (\n    <div className={classes} >\n      {message}\n    </div>\n  );\n}\n\nexport default Notification;","import axios from 'axios';\n\nconst baseUrl = 'http://localhost:3001/api/persons';\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then(response => response.data);\n};\n\nconst create = (newObject) => {\n  const request = axios.post(baseUrl, newObject);\n  return request.then(response => response.data);\n};\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\n  return request.then(response => response.data);\n};\n\nconst remove = (id) => {\n  return axios.delete(`${baseUrl}/${id}`);\n};\n\nconst personService = {\n  getAll,\n  create,\n  update,\n  remove\n};\n\nexport default personService;\n","import React, { useState, useEffect } from 'react';\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\nimport Notification from './components/Notification';\nimport personService from './services/persons';\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]);\n  const [ newName, setNewName ] = useState('');\n  const [ newNumber, setNewNumber ] = useState('');\n  const [ search, setSearch ] = useState('');\n  const [ notification, setNotification ] = useState({\n    message: null,\n    isError: false\n  });\n\n  useEffect(() => {\n    personService.getAll()\n      .then(allPersons => {\n        setPersons(allPersons);\n      })\n  }, []);\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const setFadingNotification = (message, isError = false, timeout = 5000) => {\n    setNotification({\n      message,\n      isError\n    });\n\n    setTimeout(() => {\n      setNotification({\n        message: null,\n        isError: false\n      });\n    }, timeout);\n  }\n\n  const addPerson = () => {\n    const newPerson = {\n      name: newName,\n      number: newNumber\n    };\n\n    personService\n      .create(newPerson)\n      .then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson));\n        setNewName('');\n        setNewNumber('');\n        setFadingNotification(`Added ${returnedPerson.name}`);\n      });\n  };\n\n  const handleSearch = (event) => {\n    setSearch(event.target.value);\n  };\n\n  const personsToDisplay = persons.filter(person =>\n    person.name.toLowerCase().includes(search.toLowerCase())\n  );\n\n  const deletePersonById = (id) => {\n    const person = persons.find(p => p.id === id);\n    const deleteConfirmed = window.confirm(`Delete ${person.name} ?`);\n\n    if (deleteConfirmed === false) {\n      return;\n    }\n\n    personService\n      .remove(id)\n      .then(() => {\n        setPersons(persons.filter(p => p.id !== id));\n      });\n  };\n\n  const updatePhoneNumber = (personId) => {\n    const person = persons.find(p => p.id === personId);\n    const updateConfirmed = window.confirm(\n      `${person.name} is already added to the phonebook, `\n      + 'replace the old number with a new one?'\n    );\n\n    if (updateConfirmed === false) {\n      return;\n    }\n\n    const updatedPerson = {\n      ...person,\n      number: newNumber\n    };\n\n    personService\n      .update(personId, updatedPerson)\n      .then((returnedPerson) => {\n        setPersons(persons.map(\n          p => p.id !== returnedPerson.id ? p : returnedPerson\n        ));\n        setNewName('');\n        setNewNumber('');\n        setFadingNotification(`Changed the number of ${returnedPerson.name}`);\n      })\n      .catch((error) => {\n        setFadingNotification(`The person '${updatedPerson.name}' was already deleted from server`, true);\n      })\n  };\n\n  const addOrUpdatePerson = (event) => {\n    event.preventDefault();\n\n    const person = persons.find(person => person.name === newName);\n    if (person) {\n      updatePhoneNumber(person.id);\n    } else {\n      addPerson();\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notification.message} isError={notification.isError} />\n      <Filter search={search} handleSearch={handleSearch} />\n      <PersonForm\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange}\n        addOrUpdatePerson={addOrUpdatePerson}\n      />\n      <h2>Numbers</h2>\n      <Persons persons={personsToDisplay} deletePersonById={deletePersonById} />\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}